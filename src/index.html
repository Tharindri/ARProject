<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Augmented Reality</title>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
    <script src="https://rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
    <script>
      // Component to change to a sequential image on click using the ids of the a-assets-item.
    AFRAME.registerComponent('ticket-listener', {
      init: function () {
        var lastIndex = -1;
        var images = ['#userProfile', '#appTicket', '#appTicket', '#appTicket'];
        window.addEventListener('click', function (event) {
          var box = document.getElementById("ticket");
          lastIndex = (lastIndex + 1) % images.length;
          console.log("ticket-listener",lastIndex);
          if(images[lastIndex] === '#userProfile') {
            document.querySelector('#ticket').emit('ticketAnimation');
          }

          box.setAttribute('material', `src: ${images[lastIndex]}`);
          box.setAttribute('visible', 'src: true');
        });
      }
    });

    AFRAME.registerComponent('journey-details-listener', {
      init: function () {
        var lastIndex = -1;
        var visible = ['false', 'false', 'false', 'true', 'false'];
        window.addEventListener('click', function (event) {
          var box = document.getElementById("journey-details");
          lastIndex = (lastIndex + 1) % visible.length;
          console.log("journey-details",lastIndex);

          if(visible[lastIndex] === 'true') {
            document.querySelector('#journey-details').emit('journeyDetailsAnimation');
          }

          box.setAttribute('visible', `${visible[lastIndex]}`)
        });
      }
    });

    AFRAME.registerComponent('cylinder-info1-icon-listener', {
      init: function () {
        var lastIndex = -1;
        var position = ['-0.25 0.3 0.5', '-0.25 0.3 0.5', '-0.25 0.3 0.5', '-0.25 0.3 0.5'];
        window.addEventListener('click', function (event) {
          lastIndex = (lastIndex + 1) % position.length;
          var cylinderUserPhoto1 = document.getElementById("cylinder-info1-icon");

          cylinderUserPhoto1.setAttribute('position', `${position[lastIndex]}`);
        });
      }
    });

    AFRAME.registerComponent('cylinder-info2-icon-listener', {
      init: function () {
        var lastIndex = -1;
        var position = ['-0.25 -0.3 1', '-0.25 -0.3 1', '-0.25 -0.3 1', '-0.25 -0.3 1'];
        window.addEventListener('click', function (event) {
          lastIndex = (lastIndex + 1) % position.length;
          var cylinderUserPhoto2 = document.getElementById("cylinder-info2-icon");

          cylinderUserPhoto2.setAttribute('position', `${position[lastIndex]}`);
        });
      }
    });

    AFRAME.registerComponent('cylinder-info3-icon-listener', {
      init: function () {
        var lastIndex = -1;
        var position = ['0.25 0.5 0.5', '0.25 0.5 0.5', '0.25 0.5 0.5', '0.25 0.5 0.5'];
        window.addEventListener('click', function (event) {
          lastIndex = (lastIndex + 1) % position.length;
          var cylinderUserPhoto3 = document.getElementById("cylinder-info3-icon");

          cylinderUserPhoto3.setAttribute('position', `${position[lastIndex]}`);
        });
      }
    });

    AFRAME.registerComponent('cylinder-info4-icon-listener', {
      init: function () {
        var lastIndex = -1;
        var position = ['0.25 -0.5 1', '0.25 -0.5 1', '0.25 -0.5 1', '0.25 -0.5 1'];
        window.addEventListener('click', function (event) {
          lastIndex = (lastIndex + 1) % position.length;
          var cylinderUserPhoto4 = document.getElementById("cylinder-info4-icon");

          cylinderUserPhoto4.setAttribute('position', `${position[lastIndex]}`);
        });
      }
    });

    AFRAME.registerComponent('cylinder-info5-icon-listener', {
      init: function () {
        var lastIndex = -1;
        var position = ['0 0 0', '0 0 0', '0 0 0', '0 0 0'];
        window.addEventListener('click', function (event) {
          lastIndex = (lastIndex + 1) % position.length;
          var cylinderUserPhoto5 = document.getElementById("cylinder-info5-icon");

          cylinderUserPhoto5.setAttribute('position', `${position[lastIndex]}`);
        });
      }
    });

    </script>
  </head>
  <body>
    <!-- <div id="root" style="background-image: url(./components/railcard/image2.jpg); height: 400px; width: 400px;"><img > </div> -->
    <div id="root"></div>

    <script src="/bundle.js"></script>
  </body>
</html>
